<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Datos</title>
    <link rel="stylesheet" href="estilo.css">
</head>
<body>
    <div class="container">
        <h1>Formulario de Datos</h1>
        <form id="formulario" action="#" method="post">
            <label for="nombre">Nombre:</label>
            <input type="text" id="nombre" name="nombre" required><br><br>
            
            <label for="edad">Edad:</label>
            <input type="number" id="edad" name="edad" required><br><br>
            
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required><br><br>
            
            <button type="submit">Enviar</button>
        </form>

        <h2>Datos Guardados</h2>
        <table id="tablaDatos">
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Edad</th>
                    <th>Email</th>
                </tr>
            </thead>
            <tbody id="tbodyDatos">
                <!-- Aquí se mostrarán los datos guardados -->
            </tbody>
        </table>
    </div>

    <script>
        // Función para guardar los datos en localStorage
        function guardarDatosLocalStorage() {
            var datos = [];
            var tabla = document.getElementById("tablaDatos");
            var tbody = tabla.getElementsByTagName("tbody")[0];
            var filas = tbody.getElementsByTagName("tr");
            
            for (var i = 0; i < filas.length; i++) {
                var fila = filas[i];
                var celdas = fila.getElementsByTagName("td");
                var dato = {
                    nombre: celdas[0].textContent,
                    edad: celdas[1].textContent,
                    email: celdas[2].textContent
                };
                datos.push(dato);
            }

            localStorage.setItem("datosGuardados", JSON.stringify(datos));
        }

        // Función para cargar los datos desde localStorage
        function cargarDatosLocalStorage() {
            var datos = localStorage.getItem("datosGuardados");
            if (datos) {
                datos = JSON.parse(datos);
                var tbody = document.getElementById("tbodyDatos");
                tbody.innerHTML = "";
                datos.forEach(function(dato) {
                    var fila = document.createElement("tr");
                    fila.innerHTML = "<td>" + dato.nombre + "</td><td>" + dato.edad + "</td><td>" + dato.email + "</td>";
                    tbody.appendChild(fila);
                });
            }
        }

        // Cargar los datos al cargar la página
        cargarDatosLocalStorage();

        // Evento para guardar los datos cuando se envía el formulario
        document.getElementById("formulario").addEventListener("submit", function(event) {
            event.preventDefault(); // Evita que se envíe el formulario de manera tradicional

            // Obtener los valores del formulario
            var nombre = document.getElementById("nombre").value;
            var edad = document.getElementById("edad").value;
            var email = document.getElementById("email").value;

            // Crear una nueva fila en la tabla para mostrar los datos
            var tabla = document.getElementById("tablaDatos").getElementsByTagName("tbody")[0];
            var fila = tabla.insertRow();
            var celdaNombre = fila.insertCell(0);
            var celdaEdad = fila.insertCell(1);
            var celdaEmail = fila.insertCell(2);
            celdaNombre.innerHTML = nombre;
            celdaEdad.innerHTML = edad;
            celdaEmail.innerHTML = email;

            // Guardar los datos en localStorage
            guardarDatosLocalStorage();

            // Limpiar el formulario después de enviar los datos
            document.getElementById("formulario").reset();

            window.location.href = "tt.html"; 
        });
    </script>
</body>
</html>
